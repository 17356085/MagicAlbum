# 状态更新：用户设置与“我的内容”前端实现

更新时间：2025-12-25

## 已完成
- 路由：新增 `/settings`、`/my/threads`、`/my/posts`，侧边栏已添加入口。
- 设置页：新增 `Settings.vue`，包含资料、通知、第三方关联占位区；已接入前端 API 存根。
- 我的帖子页：新增 `MyThreads.vue`，支持查询、编辑、删除，带关键词搜索与排序；时间显示为相对时间。
- 我的评论页：新增 `MyPosts.vue`，支持查询、删除与关键词搜索；时间显示为相对时间；可跳转至所属帖子。
- 评论定位与显示优化：
  - “我的评论”列表的帖子链接采用锚点格式 `/threads/{threadId}#post-{postId}`，进入帖子详情后自动定位并高亮对应评论；
  - `Comments.vue` 支持按评论 ID 展开折叠楼层并切换到包含该评论的分页，然后平滑滚动到视图中心；
  - 帖子链接文案优化为 `threadTitle`（若为空则回退为 `#threadId`）。
- 登录/登出刷新：
  - 登录成功后立即刷新页面，确保全站重新拉取用户数据与状态；
  - 登出后立即刷新页面，清理所有登录态残留；
  - 在设置页、我的帖子、我的评论页面执行登出时，先重定向到“发现”页，再执行登出与刷新，避免停留在需要登录的页面。

## 对接与验证
- 前端已对接 `front/src/api` 下的存根接口（settings、notifications、connected、my）。
- 预览验证：需在本地开发服务器运行时访问以上路由进行交互验证。

## 待完善
- 与后端接口字段与鉴权策略的最终确认与适配。
- 错误提示与空态展示（加载失败、无数据时的文案与占位）。
- 分页与列表样式的进一步优化（页码、加载更多）。
 - 评论定位的高亮样式与动效统一方案；
 - `threadTitle` 字段在后端的补齐与一致性（当前为可选字段，视接口联调完善）。

## 下一步建议
- 后端完成接口并联调：返回数据结构一致化、错误码与消息定义、鉴权校验。
- 前端增强：表单校验规则、操作成功/失败反馈、Loading/Empty/Error 统一组件化。
 - 增加 E2E 用例：从“我的评论”点击进入帖子，定位到评论并校验高亮；登录/登出刷新与重定向行为的自动化验证。