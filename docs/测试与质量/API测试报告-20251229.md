# API 测试报告

## 1. 测试概览
- **测试时间**: 2025-12-29
- **测试接口**: `https://ark.cn-beijing.volces.com/api/v3/chat/completions`
- **模型**: `doubao-1-5-pro-32k-250115` (初次尝试使用 `doubao-seed-1-6` 失败，后更正为正确模型名称)
- **测试工具**: curl (Windows PowerShell)

## 2. 测试过程与结果

### 2.1 初始尝试 (失败)
- **命令**: 直接在 PowerShell 中拼接 JSON 字符串
- **错误信息**: 
  ```json
  {"error":{"code":"InvalidParameter","message":"we could not parse the JSON body of your request...","type":"Bad Request"}}
  ```
- **原因分析**: Windows PowerShell 对 curl (即 Invoke-WebRequest 别名) 的参数解析与 Linux curl 不同，尤其是对双引号转义的处理，导致发送的 JSON 格式破损。

### 2.2 修正尝试 (成功)
- **修正方法**: 使用 PowerShell 变量构建对象，并通过 `ConvertTo-Json` 生成标准的 JSON 字符串，再传递给 curl。
- **请求内容**:
  ```powershell
  $body = @{
      model = "doubao-1-5-pro-32k-250115"
      messages = @(
          @{ role = "user"; content = "Hello" }
      )
  } | ConvertTo-Json -Depth 5 -Compress
  ```
- **响应结果**:
  ```json
  {
    "choices": [
      {
        "finish_reason": "stop",
        "index": 0,
        "logprobs": null,
        "message": {
          "content": "Hello! How can I help you today?",
          "role": "assistant"
        }
      }
    ],
    "created": 1767055611,
    "id": "0217670556097818ac096c5b7437945ca13d80bc44bde5bc1a221",
    "model": "doubao-1-5-pro-32k-250115",
    "service_tier": "default",
    "object": "chat.completion",
    "usage": {
      "completion_tokens": 9,
      "prompt_tokens": 9,
      "total_tokens": 18,
      "prompt_tokens_details": { "cached_tokens": 0 },
      "completion_tokens_details": { "reasoning_tokens": 0 }
    }
  }
  ```

### 2.3 验证项检查
- [x] **HTTP 状态码**: 200 OK (根据日志确认)
- [x] **JSON 结构**: 包含 `choices`, `message`, `content` 等标准 OpenAI 格式字段。
- [x] **响应时间**: 极快，未感知明显延迟。
- [x] **授权有效性**: Token 有效，未返回 401。

## 3. 结论
API 接口功能正常，授权凭证有效。在 Windows 环境下测试时，需注意命令行工具对 JSON 转义的特殊处理。
