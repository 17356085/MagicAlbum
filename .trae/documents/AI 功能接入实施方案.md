# 编写《网站接入AI开发方案文档》计划

我将根据您的要求，编写一份详细的开发方案文档，并将其保存到 `docs/技术扩展/网站接入AI开发方案.md`（注：使用现有的 `技术扩展` 目录以保持一致）。

## 目标文件
- **路径**: `docs/技术扩展/网站接入AI开发方案.md`
- **格式**: 标准 Markdown 技术文档

## 文档大纲与内容规划

文档将严格包含您要求的六大核心板块：

### 1. 项目概述
- **业务目标**: 提升用户阅读效率（摘要）、增强用户互动体验（陪聊）。
- **技术目标**: 构建可扩展的 AI 服务层，支持多模型切换，确保低延迟高可用。
- **范围**: 
  - **核心功能**: 帖子自动摘要、侧边栏 AI 助手（小祥版娘）。
  - **边界**: 仅处理文本内容，不涉及图片/视频理解；仅支持中文交互。

### 2. 技术架构设计
- **架构图**: 展示 Vue前端 -> Spring Boot 后端 -> AI Service -> LLM Provider (DeepSeek/OpenAI) 的数据流。
- **API 规范**:
  - 摘要接口: `POST /api/v1/ai/summary/{id}` (同步/异步可选)
  - 陪聊接口: `POST /api/v1/ai/chat` (支持 SSE 流式响应)
- **数据交互**: 统一使用 JSON，流式响应使用 SSE (Server-Sent Events)。
- **认证**: 基于 JWT 的用户身份认证 + 内部 API Key 管理。

### 3. 开发实施计划
- **阶段一 (POC)**: 接入 API，实现简单的控制台对话，验证连通性。
- **阶段二 (Alpha)**: 实现帖子摘要功能（后端存储 + 前端展示）。
- **阶段三 (Beta)**: 实现陪聊功能（上下文管理、角色设定）。
- **阶段四 (Prod)**: 性能优化、缓存策略、敏感词过滤、正式上线。
- **资源估算**: 后端开发 1 人周，前端开发 0.5 人周。

### 4. 集成测试方案
- **端到端测试**: 模拟用户发帖 -> 触发摘要 -> 前端显示的完整流程。
- **性能指标**: 
  - 摘要生成 < 5s (异步) / 获取缓存 < 200ms。
  - 聊天首字响应 < 2s。
- **异常测试**: API 超时、额度耗尽、敏感内容拦截。

### 5. 部署运维方案
- **配置管理**: API Key 通过环境变量/K8s Secrets 注入。
- **监控**: 增加 AI 接口的 Latency 和 Error Rate 监控 (Micrometer/Prometheus)。
- **日志**: 记录 Token 消耗量用于成本核算（脱敏后）。

### 6. 文档要求
- **交付物**: API Swagger 文档、AI 功能用户手册、运维配置指南。

## 下一步操作
确认计划后，我将直接创建该文件并写入详细内容。
